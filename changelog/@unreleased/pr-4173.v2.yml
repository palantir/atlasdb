type: improvement
improvement:
  description: |-
    File comparison test does not check __CLASS_HASH

    **Goals (and why)**:
    Fixes #2548, when comparing two files in SchemaTest ignore __CLASS_HASH. Comparing two generated class source files to detect API breaks checks also the __CLASS_HASH which does not contribute to the API.

    **Implementation Description (bullets)**:
    - check if the files have the same size
    - stream the files contents per line to detect differences ignoring the lines with __CLASS_HASH

    **Testing (What was existing testing like?  What have you done to improve it?)**:
    This PR improves tests.

    **Concerns (what feedback would you like?)**:
    Source code readability

    **Where should we start reviewing?**:
    n/a(single file changed)

    **Priority (whenever / two weeks / yesterday)**:
    whenever
  links:
  - https://github.com/palantir/atlasdb/pull/4173
