

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Changelog &mdash; AtlasDB develop documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/release-notes.css" type="text/css" />
  
    <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />
  

  
    <link rel="top" title="AtlasDB develop documentation" href="../index.html"/>
        <link rel="up" title="Releases" href="index.html"/>
        <link rel="next" title="Release Process" href="release-process.html"/>
        <link rel="prev" title="Releases" href="index.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> AtlasDB
          

          
          </a>

          
            
            
              <div class="version">
                develop
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../overview/index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../schemas/index.html">Schemas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../transactions/index.html">Transactions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../configuration/index.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cluster_management/index.html">Cluster Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../services/index.html">Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../miscellaneous/index.html">Miscellaneous</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Releases</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Changelog</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="release-process.html">Release Process</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">AtlasDB</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="index.html">Releases</a> &raquo;</li>
      
    <li>Changelog</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="https://github.com/palantir/atlasdb/blob/develop/docs/source/release_notes/release-notes.rst" class="fa fa-github"> Edit on GitHub</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="changelog">
<span id="change-log"></span><h1>Changelog<a class="headerlink" href="#changelog" title="Permalink to this headline">¶</a></h1>
<div class="toctree-wrapper compound">
</div>
<div class="section" id="v0-17-0">
<h2>v0.17.0<a class="headerlink" href="#v0-17-0" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Type</th>
<th class="head">Change</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><span class="changetype changetype-new">NEW</span></td>
<td><code class="docutils literal"><span class="pre">hashFirstRowComponent</span></code> can now be used on index definitions as well.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/986">Pull Request</a>)</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="v0-16-0">
<h2>v0.16.0<a class="headerlink" href="#v0-16-0" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Type</th>
<th class="head">Change</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><span class="changetype changetype-breaking">BREAKING</span></td>
<td>Removed <code class="docutils literal"><span class="pre">TransactionManager</span></code> implementations <code class="docutils literal"><span class="pre">ShellAwareReadOnlyTransactionManager</span></code>
and <code class="docutils literal"><span class="pre">AtlasDbBackendDebugTransactionManager</span></code>. These are no longer
supported by AtlasDB and products are not expected to use them.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/939">Pull Request</a>)</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-improved">IMPROVED</span></td>
<td><code class="docutils literal"><span class="pre">TransactionMangers.create()</span></code> now accepts <code class="docutils literal"><span class="pre">LockServerOptions</span></code> which can be used to
apply configurations to the embedded LockServer instance running in the product.  The other
<code class="docutils literal"><span class="pre">create()</span></code> methods will continue to use <code class="docutils literal"><span class="pre">LockServerOptions.DEFAULT</span></code>.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/984">Pull Request</a>)</td>
</tr>
<tr class="row-even"><td><span class="changetype changetype-fixed">FIXED</span></td>
<td><a class="reference internal" href="../configuration/cassandra_KVS_configuration.html#cassandra-sweep-config"><span class="std std-ref">Column paging Sweep</span></a> (in beta) correctly handles cases where table names have both upper and lowercase characters and cases where sweep is run multiple times on the same table.
If you are using the regular implementation of Sweep (i.e. you do not specify <code class="docutils literal"><span class="pre">timestampsGetterBatchSize</span></code> in your AtlasDB config), then you are not affected.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/951">Pull Request</a>)</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="v0-15-0">
<h2>v0.15.0<a class="headerlink" href="#v0-15-0" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Type</th>
<th class="head">Change</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><span class="changetype changetype-improved">IMPROVED</span></td>
<td><p class="first">We have removed references to temp tables and no longer attempt to drop temp tables when aborting transactions.</p>
<p class="last">Temp tables are not currently being used by any KVSs, yet we were still calling <code class="docutils literal"><span class="pre">dropTempTables()</span></code> when we abort transactions.
Since dropping tables is a schema mutation, this has the side effect of increasing the likelihood that we lose the schema mutation lock when there are many concurrent transactions.
Removing temp tables entirely should reduce the need to manually truncate the locks table.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/916">Pull Request</a>)</p>
</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-breaking">BREAKING</span></td>
<td><p class="first">All TransactionManagers are now AutoCloseable and implement a close method that will free up the underlying resources.</p>
<p class="last">If your service implements a <code class="docutils literal"><span class="pre">TransactionManager</span></code> and does not extend <code class="docutils literal"><span class="pre">AbstractTransactionManager</span></code>, you now have to add a close method to the implementation.
No operations can be performed using the TransactionManager once it is closed.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/907">Pull Request</a>)</p>
</td>
</tr>
<tr class="row-even"><td><span class="changetype changetype-new">NEW</span></td>
<td><p class="first"><a class="reference internal" href="../schemas/physical_cleanup.html#physical-cleanup-sweep"><span class="std std-ref">AtlasDB Sweep</span></a> now uses <a class="reference internal" href="../configuration/cassandra_KVS_configuration.html#cassandra-sweep-config"><span class="std std-ref">column paging</span></a> via the <code class="docutils literal"><span class="pre">timestampsGetterBatchSize</span></code> parameter to better handle sweeping cells with many historical versions.</p>
<p class="last">By paging over historical versions of cells during sweeping, we can avoid out of memory exceptions in Cassandra when we have particularly large cells or many historical versions of cells.
This feature is only implemented for Cassandra KVS and is disabled by default; please reach out to the AtlasDB dev team if you would like to enable it.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/834">Pull Request</a>)</p>
</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-new">NEW</span></td>
<td><p class="first">Added a second implementation of <code class="docutils literal"><span class="pre">getRowsColumnRange</span></code> method which allows you to page through dynamic columns in a single iterator.
This is expected to perform better than the previous <code class="docutils literal"><span class="pre">getRowsColumnRange</span></code>, which allows you to page through columns per row with certain KVS stores (e.g. DB KVS).
The new method should be preferred unless it is necessary to page through the results for different rows separately.</p>
<p class="last">Products or clients using wide rows should consider using <code class="docutils literal"><span class="pre">getRowsColumnRange</span></code> instead of <code class="docutils literal"><span class="pre">getRows</span></code> in <code class="docutils literal"><span class="pre">KeyValueService</span></code>.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/724">Pull Request</a>)</p>
</td>
</tr>
<tr class="row-even"><td><span class="changetype changetype-new">NEW</span></td>
<td><p class="first">Added an <a class="reference internal" href="../cluster_management/clis.html#offline-clis"><span class="std std-ref">offline CLI</span></a> called <code class="docutils literal"><span class="pre">clean-cass-locks-state</span></code> to truncate the locks table when the schema mutation lock has been lost.</p>
<p class="last">This is useful on Cassandra KVS if an AtlasDB client goes down during a schema mutation and does not release the schema mutation lock, preventing other clients from continuing.
Previously an error message would direct users to manually truncate this table with CQL, but now this error message references the CLI.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/888">Pull Request</a>)</p>
</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-changed">CHANGED</span></td>
<td>Reverted our Dagger dependency from 2.4 to 2.0.2 and shadowed it so that it won&#8217;t conflict with internal products.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/926">Pull Request</a>)</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="v0-14-0">
<h2>v0.14.0<a class="headerlink" href="#v0-14-0" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Type</th>
<th class="head">Change</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><span class="changetype changetype-breaking">BREAKING</span></td>
<td><p class="first"><code class="docutils literal"><span class="pre">TransactionManagers.create()</span></code> no longer takes in an argument of <code class="docutils literal"><span class="pre">Optional&lt;SSLSocketFactory&gt;</span> <span class="pre">sslSocketFactory</span></code>.
Instead, security settings between AtlasDB clients are now specified directly in configuration via the new optional parameter <code class="docutils literal"><span class="pre">sslConfiguration</span></code> located in the <code class="docutils literal"><span class="pre">leader</span></code>, <code class="docutils literal"><span class="pre">timestamp</span></code>, and <code class="docutils literal"><span class="pre">lock</span></code> blocks.
Details can be found in the <a class="reference internal" href="../configuration/leader_config.html#leader-config"><span class="std std-ref">Leader Configuration</span></a> documentation.</p>
<p class="last">To assist with back compatibility, we have introduced a helper method <code class="docutils literal"><span class="pre">AtlasDbConfigs.addFallbackSslConfigurationToAtlasDbConfig</span></code>, which will add the provided <code class="docutils literal"><span class="pre">sslConfiguration</span></code> to <code class="docutils literal"><span class="pre">config</span></code> if the SSL configuration is not specified directly in the <code class="docutils literal"><span class="pre">leader</span></code>, <code class="docutils literal"><span class="pre">timestamp</span></code>, or <code class="docutils literal"><span class="pre">lock</span></code> blocks.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/873">Pull Request 1</a> and <a class="reference external" href="https://github.com/palantir/atlasdb/pull/906">Pull Request 2</a>)</p>
</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-fixed">FIXED</span></td>
<td>AtlasDB could startup with a leader configuration that is nonsensical, such as specifying both a <code class="docutils literal"><span class="pre">leader</span></code> block as well as a remote <code class="docutils literal"><span class="pre">timestamp</span></code> and <code class="docutils literal"><span class="pre">lock</span></code> blocks.
AtlasDB will now fail to start if your configuration is invalid with a sensible message, per <a class="reference external" href="https://github.com/palantir/atlasdb/issues/790">#790</a>, rather than potentially breaking in unexpected ways.
Please refer to <a class="reference internal" href="../configuration/leader_config.html#leader-config-examples"><span class="std std-ref">Example Leader Configurations</span></a> for guidance on valid configurations.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/854">Pull Request</a>)</td>
</tr>
<tr class="row-even"><td><span class="changetype changetype-fixed">FIXED</span></td>
<td>Fixed and standardized serialization and deserialization of AtlasDBConfig.
This prevented CLIs deployed via the <a class="reference internal" href="../cluster_management/dropwizard-bundle.html#dropwizard-bundle"><span class="std std-ref">Dropwizard bundle</span></a> from loading configuration properly.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/875">Pull Request</a>)</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-breaking">BREAKING</span></td>
<td>Updated our Dagger dependency from 2.0.2 to 2.4, so that our generated code matches with that of internal products.
This also bumps our Guava dependency from 18.0 to 19.0 to accommodate a Dagger compile dependency.
We plan on shading Dagger in the next release of AtlasDB, but products can force a Guava 18.0 runtime dependency to workaround the issue in the meantime.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/878">Pull Request</a>)</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="v0-13-0">
<h2>v0.13.0<a class="headerlink" href="#v0-13-0" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Type</th>
<th class="head">Change</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><span class="changetype changetype-breaking">BREAKING</span></td>
<td><code class="docutils literal"><span class="pre">AtlasDbServer</span></code> has been renamed to <code class="docutils literal"><span class="pre">AtlasDbServiceServer</span></code>.
Any products that are using this should switch to using the standard AtlasDB java API instead.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/801">Pull Request</a>)</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-breaking">BREAKING</span></td>
<td>The method <code class="docutils literal"><span class="pre">updateManyUnregisteredQuery(String</span> <span class="pre">sql)</span></code> has been removed from the <code class="docutils literal"><span class="pre">SqlConnection</span></code> interface, as it was broken, unused, and unnecessary.
Use <code class="docutils literal"><span class="pre">updateManyUnregisteredQuery(String</span> <span class="pre">sql,</span> <span class="pre">Iterable&lt;Object[]</span> <span class="pre">list&gt;)</span></code> instead.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/796">Pull Request</a>)</td>
</tr>
<tr class="row-even"><td><span class="changetype changetype-improved">IMPROVED</span></td>
<td>Improved logging for schema mutation lock timeouts and added logging for obtaining and releasing locks.
Removed the advice to restart the client, as it will not help in this scenario.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/805">Pull Request</a>)</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-fixed">FIXED</span></td>
<td>Connections to Cassandra can be established over arbitrary ports.
Previously AtlasDB clients would assume the default Cassandra port of 9160 despite what is specified in the <a class="reference internal" href="../configuration/cassandra_KVS_configuration.html#cassandra-kvs-config"><span class="std std-ref">Cassandra keyValueService configuration</span></a>.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/771">Pull Request</a>)</td>
</tr>
<tr class="row-even"><td><span class="changetype changetype-fixed">FIXED</span></td>
<td>Fixed an issue when starting an AtlasDB client using the Cassandra KVS where we always grab the schema mutation lock, even if we are not making schema mutations.
This reduces the likelihood of clients losing the schema mutation lock and having to manually truncate the _locks table.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/771">Pull Request</a>)</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-improved">IMPROVED</span></td>
<td>Performance and reliability enhancements to the in-beta CQL KVS.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/771">Pull Request</a>)</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="v0-12-0">
<h2>v0.12.0<a class="headerlink" href="#v0-12-0" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Type</th>
<th class="head">Change</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><span class="changetype changetype-breaking">BREAKING</span></td>
<td>AtlasDB will always try to register timestamp and lock endpoints for your application, whereas previously this only occurred if you specify a <a class="reference internal" href="../configuration/leader_config.html#leader-config"><span class="std std-ref">Leader Configuration</span></a>.
This ensures that CLIs will be able to run against your service even in the single node case.
For Dropwizard applications, this is only a breaking change if you try to initialize your KeyValueService after having initialized the Dropwizard application.
Note: If you are initializing the KVS post-Dropwizard initialization, then your application will already fail when starting multiple AtlasDB clients.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/708">Pull Request</a>)</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-new">NEW</span></td>
<td>There is now a Dropwizard bundle which can be added to Dropwizard applications.
This will add startup commands to launch the AtlasDB console and <a class="reference internal" href="../cluster_management/clis.html#clis"><span class="std std-ref">CLIs</span></a> suchs as <code class="docutils literal"><span class="pre">sweep</span></code> and <code class="docutils literal"><span class="pre">timestamp</span></code>, which is needed to perform <a class="reference internal" href="../cluster_management/backup-restore.html#backup-restore"><span class="std std-ref">live backups</span></a>.
These commands will only work if the server is started with a leader block in its configuration.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/629">Pull Request 1</a> and <a class="reference external" href="https://github.com/palantir/atlasdb/pull/696">Pull Request 2</a>)</td>
</tr>
<tr class="row-even"><td><span class="changetype changetype-fixed">FIXED</span></td>
<td>DB passwords are no longer output as part of the connection configuration <code class="docutils literal"><span class="pre">toString()</span></code> methods.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/755">Pull Request</a>)</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-new">NEW</span></td>
<td>All KVSs now come wrapped with ProfilingKeyValueService, which at the TRACE level provides timing information per KVS operation performed by AtlasDB.
See <a class="reference internal" href="../configuration/logging.html#logging-configuration"><span class="std std-ref">Logging Configuration</span></a> for more details.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/798">Pull Request</a>)</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="v0-11-4">
<h2>v0.11.4<a class="headerlink" href="#v0-11-4" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Type</th>
<th class="head">Change</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><span class="changetype changetype-fixed">FIXED</span></td>
<td>Correctly checks the Cassandra client version that determines if Cassandra supports Check And Set operations.
This is a critical bug fix that ensures we actually use our implementation from <a class="reference external" href="https://github.com/palantir/atlasdb/pull/436">#436</a>, which prevents the Cassandra concurrent table creation bug described in <a class="reference external" href="https://github.com/palantir/atlasdb/issues/431">#431</a>.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/751">Pull Request</a>)</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="v0-11-2">
<h2>v0.11.2<a class="headerlink" href="#v0-11-2" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Type</th>
<th class="head">Change</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><span class="changetype changetype-changed">CHANGED</span></td>
<td>The <code class="docutils literal"><span class="pre">ssl</span></code> property now takes precedence over the new <code class="docutils literal"><span class="pre">sslConfiguration</span></code> block to allow back-compatibility.
This means that products can add default truststore and keystore configuration to their AtlasDB config without overriding previously made SSL decisions (setting <code class="docutils literal"><span class="pre">ssl:</span> <span class="pre">false</span></code> should cause SSL to not be used).
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/745">Pull Request</a>)</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="v0-11-1">
<h2>v0.11.1<a class="headerlink" href="#v0-11-1" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Type</th>
<th class="head">Change</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><span class="changetype changetype-fixed">FIXED</span></td>
<td>Removed a check enforcing a leader block config when one was not required.
This prevents AtlasDB 0.11.0 clients from starting if a leader configuration is not specified (i.e. single node clusters).
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/741">Pull Request</a>)</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-improved">IMPROVED</span></td>
<td>Updated schema table generation to optimize reads with no ColumnSelection specified against tables with fixed columns.  To benefit from this improvement you will need to re-generate your schemas.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/713">Pull Request</a>)</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="v0-11-0">
<h2>v0.11.0<a class="headerlink" href="#v0-11-0" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Type</th>
<th class="head">Change</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><span class="changetype changetype-improved">IMPROVED</span></td>
<td>Clarified the logging when multiple timestamp servers are running to state that CLIs could be causing the issue.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/719">Pull Request</a>)</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-changed">CHANGED</span></td>
<td>Updated cassandra client from 2.2.1 to 2.2.7 and cassandra docker testing version from 2.2.6 to 2.2.7.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/699">Pull Request</a>)</td>
</tr>
<tr class="row-even"><td><span class="changetype changetype-fixed">FIXED</span></td>
<td><p class="first">The leader config now contains a new <code class="docutils literal"><span class="pre">lockCreator</span></code> option, which specifies the single node that creates the locks table when starting your cluster for the very first time.
This configuration prevents an extremely unlikely race condition where multiple clients can create the locks table simultaneously.
Full details on the failure scenario can be found on <a class="reference external" href="https://github.com/palantir/atlasdb/issues/444#issuecomment-221612886">#444</a>.</p>
<p>If left blank, <code class="docutils literal"><span class="pre">lockCreator</span></code> will default to the first host in the <code class="docutils literal"><span class="pre">leaders</span></code> list, but we recommend setting this explicitly to ensure that the lockCreater is the same value across all your clients for a specific service.
This configuration is only relevant for new clusters and does not affect existing AtlasDB clusters.</p>
<p class="last">Full details for configuring the leader block, see <a class="reference external" href="https://palantir.github.io/atlasdb/html/configuration/cassandra_KVS_configuration.html">cassandra configuration</a>.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/594">Pull Request</a>)</p>
</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-fixed">FIXED</span></td>
<td>A utility method was removed in the previous release, breaking an internal product that relied on it.
This method has now been added back.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/661">Pull Request</a>)</td>
</tr>
<tr class="row-even"><td><span class="changetype changetype-fixed">FIXED</span></td>
<td>Removed unnecessary error message for missing _timestamp metadata table.
_timestamp is a hidden table, and it is expected that _timestamp metadata should not be retrievable from public API.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/716">Pull Request</a>)</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-improved">IMPROVED</span></td>
<td>Trace logging is more informative and will log all failed calls.
To enable trace logging, see <a class="reference external" href="https://palantir.github.io/atlasdb/html/configuration/enabling_cassandra_tracing.html#enabling-cassandra-tracing">Enabling Cassandra Tracing</a>.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/700">Pull Request</a>)</td>
</tr>
<tr class="row-even"><td><span class="changetype changetype-deprecated">DEPRECATED</span></td>
<td>The Cassandra KVS now supports specifying SSL options via the new <code class="docutils literal"><span class="pre">sslConfiguration</span></code> block, which takes precedence over the now deprecated <code class="docutils literal"><span class="pre">ssl</span></code> property.
The <code class="docutils literal"><span class="pre">ssl</span></code> property will be removed in a future release, and consumers leveraging the Cassandra KVS are encouraged to use the <code class="docutils literal"><span class="pre">sslConfiguration</span></code> block instead.
See the <a class="reference external" href="https://palantir.github.io/atlasdb/html/configuration/cassandra_KVS_configuration.html#communicating-over-ssl">Cassandra SSL Configuration</a> documentation for more details.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/638">Pull Request</a>)</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="v0-10-0">
<h2>v0.10.0<a class="headerlink" href="#v0-10-0" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Type</th>
<th class="head">Change</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><span class="changetype changetype-changed">CHANGED</span></td>
<td>Updated HikariCP dependency from 2.4.3 to 2.4.7 to comply with updates in internal products.
Details of the HikariCP changes can be found <a class="reference external" href="https://github.com/brettwooldridge/HikariCP/blob/dev/CHANGES">here</a>.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/662">Pull Request</a>)</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-new">NEW</span></td>
<td><p class="first">AtlasDB currently allows you to create dynamic columns (wide rows), but you can only retrieve entire rows or specific columns.
Typically with dynamic columns, you do not know all the columns you have in advance, and this features allows you to page through dynamic columns per row, reducing pressure on the underlying KVS.
Products or clients (such as AtlasDB Sweep) making use of wide rows should consider using <code class="docutils literal"><span class="pre">getRowsColumnRange</span></code> instead of <code class="docutils literal"><span class="pre">getRows</span></code> in <code class="docutils literal"><span class="pre">KeyValueService</span></code>.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/582">Pull Request</a>)</p>
<p class="last">Note: This is considered a beta feature and is not yet being used by AtlasDB Sweep.</p>
</td>
</tr>
<tr class="row-even"><td><span class="changetype changetype-fixed">FIXED</span></td>
<td>We properly check that cells are not set to empty (zero-byte) or null.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/663">Pull Request</a>)</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-improved">IMPROVED</span></td>
<td>Cassandra client connection pooling will now evict idle connections over a longer period of time and has improved logic
for deciding whether or not a node should be blacklisted.  This should result in less connection churn
and therefore lower latency.  (<a class="reference external" href="https://github.com/palantir/atlasdb/pull/667">Pull Request</a>)</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="v0-9-0">
<h2>v0.9.0<a class="headerlink" href="#v0-9-0" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Type</th>
<th class="head">Change</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><span class="changetype changetype-breaking">BREAKING</span></td>
<td><p class="first">Inserting an empty (size = 0) value into a <code class="docutils literal"><span class="pre">Cell</span></code> will now throw an <code class="docutils literal"><span class="pre">IllegalArgumentException</span></code>. (<a class="reference external" href="https://github.com/palantir/atlasdb/issues/156">#156</a>) Likely empty
values include empty strings and empty protobufs.</p>
<p>AtlasDB cannot currently distinguish between empty and deleted cells. In previous versions of AtlasDB, inserting
an empty value into a <code class="docutils literal"><span class="pre">Cell</span></code> would delete that cell. Thus, in this snippet,</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">Transaction</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">table</span><span class="o">,</span> <span class="n">ImmutableMap</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">myCell</span><span class="o">,</span> <span class="k">new</span> <span class="kt">byte</span><span class="o">[</span><span class="mi">0</span><span class="o">]))</span>
<span class="n">Transaction</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">table</span><span class="o">,</span> <span class="n">ImmutableSet</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">myCell</span><span class="o">)).</span><span class="na">get</span><span class="o">(</span><span class="n">myCell</span><span class="o">)</span>
</pre></div>
</div>
<p>the second line will return <code class="docutils literal"><span class="pre">null</span></code> instead of a zero-length byte array.</p>
<p>To minimize confusion, we explicitly disallow inserting an empty value into a cell by throwing an
<code class="docutils literal"><span class="pre">IllegalArgumentException</span></code>.</p>
<p>In particular, this change will break calls to <code class="docutils literal"><span class="pre">Transaction.put(TableReference</span> <span class="pre">tableRef,</span> <span class="pre">Map&lt;Cell,</span> <span class="pre">byte[]&gt;</span> <span class="pre">values)</span></code>,
as well as generated code which uses this method, if any entry in <code class="docutils literal"><span class="pre">values</span></code> contains a zero-byte array. If your
product does not need to distinguish between empty and non-existent values, simply make sure all the <code class="docutils literal"><span class="pre">values</span></code>
entries have positive length. If the distinction is necessary, you will need to explicitly differentiate the
two cases (for example, by introducing a sentinel value for empty cells).</p>
<p>If any code deletes cells by calling <code class="docutils literal"><span class="pre">Transaction.put(...)</span></code> with an empty array, use
<code class="docutils literal"><span class="pre">Transaction.delete(...)</span></code> instead.</p>
<p class="last"><em>Note</em>: Existing cells with empty values will be interpreted as deleted cells, and will not lead to Exceptions when read.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/524">Pull Request</a>)</p>
</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-improved">IMPROVED</span></td>
<td>The warning emitted when an attempted leadership election fails is now more descriptive.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/630">Pull Request</a>)</td>
</tr>
<tr class="row-even"><td><span class="changetype changetype-fixed">FIXED</span></td>
<td><p class="first">Code generation for the <code class="docutils literal"><span class="pre">hashCode</span></code> of <code class="docutils literal"><span class="pre">*IdxColumn</span></code> classes now uses <code class="docutils literal"><span class="pre">deepHashCode</span></code> for its arrays such that it returns
consistent hash codes for use with hash-based collections (HashMap, HashSet, HashTable).
This issue will only appear if you are instantiating columns in multiple places and storing columns in hash collections.</p>
<p class="last">If you are using <a class="reference external" href="https://palantir.github.io/atlasdb/html/schemas/tables_and_indices.html#indices">Indices</a> we recommend you upgrade as a precaution and ensure you are not relying on logic related to the <code class="docutils literal"><span class="pre">hashCode</span></code> of auto-generated <code class="docutils literal"><span class="pre">*IdxColumn</span></code> classes.
You will need to regenerate your schema code in order to see this fix.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/600">Pull Request</a>)</p>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="v0-8-0">
<h2>v0.8.0<a class="headerlink" href="#v0-8-0" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Type</th>
<th class="head">Change</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><span class="changetype changetype-fixed">FIXED</span></td>
<td>Some logging was missing important information due to use of the wrong substitution placeholder. This version should be taken in preference to 0.7.0 to ensure logging is correct.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/642">Pull Request</a>)</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="v0-7-0">
<h2>v0.7.0<a class="headerlink" href="#v0-7-0" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Type</th>
<th class="head">Change</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><span class="changetype changetype-new">NEW</span></td>
<td>AtlasDB can now be backed by Postgres via DB KVS. This is a very early release for this feature, so please contact us if you
plan on using it. Please see <a class="reference internal" href="../configuration/postgres_key_value_service_config.html#postgres-configuration"><span class="std std-ref">the documentation</span></a> for more details.</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-fixed">FIXED</span></td>
<td>The In Memory Key Value Service now makes defensive copies of any data stored or retrieved. This may lead to a slight performance degradation to users of In Memory Key Value Service.
In Memory Key Value Service is recommended for testing environments only and production instances should use DB KVS or Cassandra KVS for data that needs to be persisted.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/552">Pull Request</a>)</td>
</tr>
<tr class="row-even"><td><span class="changetype changetype-fixed">FIXED</span></td>
<td>AtlasDB will no longer log incorrect errors stating &#8220;Couldn&#8217;t grab new token ranges for token aware cassandra mapping&#8221; when running against a single node and single token Cassandra cluster.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/634">Pull Request</a>)</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-improved">IMPROVED</span></td>
<td>Read heavy workflows with Cassandra KVS will now use substantially less heap. In worst-case testing this change resulted in a 10-100x reduction in client side heap size.
However, this is very dependent on the particular scenario AtlasDB is being used in and most consumers should not expect a difference of this size.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/568">Pull Request</a>)</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="v0-6-0">
<h2>v0.6.0<a class="headerlink" href="#v0-6-0" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Type</th>
<th class="head">Change</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><span class="changetype changetype-fixed">FIXED</span></td>
<td>A potential race condition could cause timestamp allocation to never complete on a particular node (#462)</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-fixed">FIXED</span></td>
<td>An innocuous error was logged once for each TransactionManager about not being able to allocate
enough timestamps. The error has been downgraded to INFO and made less scary.</td>
</tr>
<tr class="row-even"><td><span class="changetype changetype-fixed">FIXED</span></td>
<td>Serializable Transactions that read a column selection could consistently report conflicts when there were none.</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-fixed">FIXED</span></td>
<td>An excessively long Cassandra related logline was sometimes printed (#501)</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="v0-5-0">
<h2>v0.5.0<a class="headerlink" href="#v0-5-0" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Type</th>
<th class="head">Change</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><span class="changetype changetype-changed">CHANGED</span></td>
<td>Only bumping double minor version in artifacts for long-term stability fixes</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="v0-4-1">
<h2>v0.4.1<a class="headerlink" href="#v0-4-1" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Type</th>
<th class="head">Change</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><span class="changetype changetype-fixed">FIXED</span></td>
<td>Prevent _metadata tables from triggering the Cassandra 2.x schema mutation bug <a class="reference external" href="https://github.com/palantir/atlasdb/issues/431">431</a> (<a class="reference external" href="https://github.com/palantir/atlasdb/issues/444">444</a> not yet fixed)</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-fixed">FIXED</span></td>
<td>Required projects are now Java 6 compliant</td>
</tr>
</tbody>
</table>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="release-process.html" class="btn btn-neutral float-right" title="Release Process" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral" title="Releases" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Palantir Technologies.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'develop',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>